<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paper Map</title>
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/mobile.css">
</head>
<body>
  <header>
    <h1>Paper Map</h1>
    <button class="hamburger-btn" id="hamburgerBtn" aria-label="Menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <button class="theme-toggle" id="themeToggle" title="Toggle theme">ğŸŒ™</button>
    <div class="stats" id="stats">Loading...</div>
    <span class="filter-status" id="filterStatus"></span>
    <button class="missing-btn" id="showGlobalStats" title="ì „ì²´ í†µê³„">ğŸ“ˆ Stats</button>
    <button class="missing-btn" id="copyClusters" title="í´ëŸ¬ìŠ¤í„°ë³„ ë…¼ë¬¸ ëª©ë¡ ë³µì‚¬">ğŸ“‹ Clusters</button>
    <button class="missing-btn" id="copyFiltered" title="í•„í„°ëœ ë…¼ë¬¸ ì •ë³´+ë…¸íŠ¸ ë³µì‚¬">ğŸ“ Export</button>
    <button class="missing-btn" id="showClassics" title="ë§ì´ ì¸ìš©ëœ ê¸°ì´ˆ ë…¼ë¬¸" style="color: #58a6ff;">ğŸ“š Classics</button>
    <button class="missing-btn" id="showNewWork" title="ë‚´ ë…¼ë¬¸ì„ ì¸ìš©í•˜ëŠ” ìµœì‹ ì‘" style="color: #f97316;">ğŸ†• New</button>
    <div class="legend">
      <div class="legend-item">
        <div class="legend-dot" style="background: #58a6ff;"></div>
        <span>Papers</span>
      </div>
      <div class="legend-item">
        <div class="legend-diamond"></div>
        <span>Apps/Services</span>
      </div>
      <div class="legend-item">
        <div style="width: 20px; height: 2px; background: #58a6ff;"></div>
        <span>References</span>
      </div>
      <div class="legend-item">
        <div style="width: 20px; height: 2px; background: #f97316;"></div>
        <span>Cited by</span>
      </div>
    </div>
    <div class="controls">
      <div class="control-group">
        <label>Min Year:</label>
        <input type="number" id="minYear" value="1990" min="1990" max="2025">
      </div>
      <div class="control-group">
        <label>Min Venue Quality:</label>
        <select id="minVenue">
          <option value="0">All</option>
          <option value="3">3+</option>
          <option value="4">4+</option>
          <option value="5">5 only</option>
        </select>
      </div>
      <div class="control-group">
        <input type="checkbox" id="papersOnly">
        <label for="papersOnly">Papers only</label>
      </div>
      <div class="control-group">
        <label>Tag:</label>
        <select id="tagFilter" style="width: 120px;">
          <option value="">All tags</option>
        </select>
      </div>
      <div class="control-group">
        <label>Search:</label>
        <input type="text" id="searchFilter" placeholder="ì œëª©/ì €ì/ì´ˆë¡/ë…¸íŠ¸" style="width: 120px;">
      </div>
      <div class="control-group" style="border-left: 1px solid #30363d; padding-left: 16px;">
        <label>Intersection:</label>
        <select id="intersectCluster1" style="width: 90px;">
          <option value="">C1</option>
        </select>
        <span style="color: #8b949e;">â†”</span>
        <select id="intersectCluster2" style="width: 90px;">
          <option value="">C2</option>
        </select>
        <button id="findIntersection" style="background: #8b5cf6;">Find</button>
      </div>
      <div class="control-group">
        <input type="checkbox" id="showCitations" checked>
        <label for="showCitations">Citations</label>
      </div>
      <button id="resetFilter" style="background: #30363d;">Reset</button>
      <div class="mode-toggle" id="modeToggle">
        <span class="mode-option" data-mode="highlight">Highlight</span>
        <span class="mode-option" data-mode="filter">Filter</span>
      </div>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

  <!-- Mobile Menu -->
  <nav class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
      <h2>Filters</h2>
      <button class="theme-toggle" id="mobileThemeToggle" title="Toggle theme">ğŸŒ™</button>
    </div>

    <div class="mobile-menu-section">
      <h3>Filters</h3>
      <div class="control-group">
        <label>Min Year</label>
        <input type="number" id="mobileMinYear" value="1990" min="1990" max="2025">
      </div>
      <div class="control-group">
        <label>Min Venue Quality</label>
        <select id="mobileMinVenue">
          <option value="0">All</option>
          <option value="3">3+</option>
          <option value="4">4+</option>
          <option value="5">5 only</option>
        </select>
      </div>
      <div class="control-group">
        <label>Tag</label>
        <select id="mobileTagFilter">
          <option value="">All tags</option>
        </select>
      </div>
      <div class="control-group">
        <label><input type="checkbox" id="mobilePapersOnly"> Papers only</label>
      </div>
    </div>

    <div class="mobile-menu-section">
      <h3>Search</h3>
      <div class="control-group">
        <input type="text" id="mobileSearchFilter" placeholder="Title, author, abstract...">
      </div>
    </div>

    <div class="mobile-menu-section">
      <h3>Display</h3>
      <div class="control-group">
        <label><input type="checkbox" id="mobileShowCitations" checked> Show citation links</label>
      </div>
    </div>

    <div class="mobile-menu-section">
      <h3>Actions</h3>
      <button id="mobileResetFilter" style="width: 100%; background: var(--bg-tertiary); margin-bottom: 8px;">Reset Filters</button>
      <button id="mobileShowStats" style="width: 100%; background: var(--bg-tertiary); margin-bottom: 8px;">ğŸ“ˆ Statistics</button>
      <button id="mobileCopyExport" style="width: 100%; background: var(--bg-tertiary);">ğŸ“ Export</button>
    </div>
  </nav>

  <!-- Mobile Cluster Chips -->
  <div class="cluster-chips" id="mobileClusterChips"></div>

  <div class="main-content">
    <div class="cluster-panel" id="clusterPanel">
      <div class="cluster-header">
        <h3>Clusters</h3>
        <button class="collapse-btn" id="collapseCluster" title="Toggle panel">â—€</button>
      </div>
      <div id="clusterList"></div>
    </div>
    <div id="plot"></div>
    <div class="detail-panel" id="detailPanel">
      <div class="resize-handle" id="resizeHandle"></div>
      <button class="close-btn" id="closeDetail" title="Close">âœ•</button>
      <h2 id="detailTitle">-</h2>
      <div class="meta" id="detailMeta"></div>
      <div class="links" id="detailLinks"></div>
      <div class="abstract" id="detailAbstract"></div>
      <div id="detailNotes"></div>
      <div class="citation-section" id="referencesSection"></div>
      <div class="citation-section" id="citedBySection"></div>
      <div class="similar-papers" id="similarPapers"></div>
    </div>
  </div>

  <!-- Missing Papers Modal -->
  <div class="modal-overlay" id="missingModal">
    <div class="modal">
      <div class="modal-header">
        <h3>ğŸ“š Missing Papers</h3>
        <button class="modal-close" id="closeMissing">âœ•</button>
      </div>
      <p class="modal-desc">ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ìì£¼ ì¸ìš©í•˜ì§€ë§Œ ì•„ì§ ì—†ëŠ” ë…¼ë¬¸ë“¤</p>
      <div class="modal-content" id="missingList"></div>
    </div>
  </div>

  <!-- Mobile Bottom Sheet -->
  <div class="bottom-sheet" id="bottomSheet">
    <div class="bottom-sheet-handle" id="bottomSheetHandle"></div>
    <button class="bottom-sheet-close" id="bottomSheetClose">âœ•</button>
    <div class="bottom-sheet-content" id="bottomSheetContent">
      <h2 id="mobileDetailTitle">-</h2>
      <div class="meta" id="mobileDetailMeta"></div>
      <div class="links" id="mobileDetailLinks"></div>
      <div class="abstract" id="mobileDetailAbstract"></div>
      <div id="mobileDetailNotes"></div>
      <div class="citation-section" id="mobileReferencesSection"></div>
      <div class="citation-section" id="mobileCitedBySection"></div>
      <div class="similar-papers" id="mobileSimilarPapers"></div>
    </div>
  </div>

  <!-- Mobile Legend -->
  <div class="mobile-legend" id="mobileLegend">
    <div class="legend-item">
      <div class="legend-dot" style="background: #58a6ff; width: 8px; height: 8px; display: inline-block;"></div>
      Papers
    </div>
    <div class="legend-item">
      <div style="width: 8px; height: 8px; background: #bc8cff; transform: rotate(45deg); display: inline-block;"></div>
      Apps
    </div>
  </div>

  <!-- JavaScript modules -->
  <script src="js/config.js"></script>
  <script src="js/state.js"></script>
  <script src="js/data.js"></script>
  <script src="js/render.js"></script>
  <script src="js/detail.js"></script>
  <script src="js/mobile.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
